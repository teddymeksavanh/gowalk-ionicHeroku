!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core"],t):t((e.ng=e.ng||{},e.ng.fusioncharts={}),e.ng.core)}(this,function(e,t){"use strict";function a(e){return null!==e&&"object"==typeof e}function n(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r=Object.keys(e),s=0;s<r.length;++s){var o=r[s];if(a(e[o])&&a(t[o])){if(!n(e[o],t[o]))return!1}else if(e[o]!==t[o])return!1}return!0}function r(e){return void 0===e}function s(e){return JSON.parse(JSON.stringify(e))}var o=function(){return function(){}}();o.decorators=[{type:t.Injectable}],o.ctorParameters=function(){return[]};var i=function(){function e(t){this.fusionChartsCoreService=t,e.isFusionChartsCoreResolved()||e.resolveFusionChartsCore(t.core,t.modules)}return e.getResolvedFusionChartsCore=function(){return e.resolvedFusionChartsCore},e.isFusionChartsCoreResolved=function(){return!!e.resolvedFusionChartsCore},e.resolveFusionChartsCore=function(t,a){var n;n=t&&t.getCurrentRenderer&&"javascript"===t.getCurrentRenderer()?t:t(),a.forEach(function(e){e(n)}),n.options&&(n.options.SVGDefinitionURL="absolute"),e.resolvedFusionChartsCore=n},e.prototype.newFusionChartsInstance=function(t){return new(0,e.resolvedFusionChartsCore)(t)},e}();i.resolvedFusionChartsCore=null,i.decorators=[{type:t.Injectable}],i.ctorParameters=function(){return[{type:o}]};var p=["type","id","width","height","dataFormat","dataSource","events","link","showDataLoadingMessage","showChartLoadingMessage","baseChartMessageFont","baseChartMessageFontSize","baseChartMessageColor","dataLoadStartMessage","dataLoadErrorMessage","dataInvalidMessage","dataEmptyMessage","typeNotSupportedMessage","loadMessage","renderErrorMessage","containerBackgroundColor","containerBackgroundOpacity","containerClassName","baseChartMessageImageHAlign","baseChartMessageImageVAlign","baseChartMessageImageAlpha","baseChartMessageImageScale","typeNotSupportedMessageImageHAalign","typeNotSupportedMessageImageVAlign","typeNotSupportedMessageImageAlpha","typeNotSupportedMessageImageScale","dataLoadErrorMessageImageHAlign","dataLoadErrorMessageImageVAlign","dataLoadErrorMessageImageAlpha","dataLoadErrorMessageImageScale","dataLoadStartMessageImageHAlign","dataLoadStartMessageImageVAlign","dataLoadStartMessageImageAlpha","dataLoadStartMessageImageScale","dataInvalidMessageImageHAlign","dataInvalidMessageImageVAlign","dataInvalidMessageImageAlpha","dataInvalidMessageImageScale","dataEmptyMessageImageHAlign","dataEmptyMessageImageVAlign","dataEmptyMessageImageAlpha","dataEmptyMessageImageScale","renderErrorMessageImageHAlign","renderErrorMessageImageVAlign","renderErrorMessageImageAlpha","renderErrorMessageImageScale","loadMessageImageHAlign","loadMessageImageVAlign","loadMessageImageAlpha","loadMessageImageScale"],g=function(){function e(e,t){this.fusionChartsService=e,this.ngZone=t}return e.prototype.ngOnInit=function(){this.oldOptions=this.getCurrentOptions()},e.prototype.ngDoCheck=function(){this.detectChanges()},e.prototype.ngAfterViewInit=function(){this.renderChart()},e.prototype.ngOnDestroy=function(){this.chartObj.dispose()},e.prototype.detectChanges=function(){var e=this.getCurrentOptions(),t=this.oldOptions,a=["width","height","type","dataFormat","dataSource","events"];this.checkAndUpdateChartDimensions(e,t),this.checkAndUpdateChartType(e,t),this.checkAndUpdateChartData(e,t),this.checkAndUpdateEvents(e,t),this.checkAndUpdateRestOptions(p.filter(function(e){return-1===a.indexOf(e)}),e,t),this.oldOptions=e},e.prototype.checkAndUpdateChartDimensions=function(e,t){var a=this,n=e.width,s=e.height,o=t.width,i=t.height;String(n)===String(o)&&String(s)===String(i)||(r(n)||r(s)?(r(n)||this.runOutsideAngular(function(){a.chartObj.resizeTo({w:n})}),r(s)||this.runOutsideAngular(function(){a.chartObj.resizeTo({h:s})})):this.runOutsideAngular(function(){a.chartObj.resizeTo(n,s)}))},e.prototype.checkAndUpdateChartType=function(e,t){var a=this,n=e.type,s=t.type;String(n).toLowerCase()!==String(s).toLowerCase()&&(r(n)||this.runOutsideAngular(function(){a.chartObj.chartType(String(n).toLowerCase())}))},e.prototype.checkAndUpdateChartData=function(e,t){var a=this,n=e.dataFormat,s=e.dataSource,o=t.dataFormat,i=t.dataSource;String(n).toLowerCase()!==String(o).toLowerCase()?r(n)||r(s)||this.runOutsideAngular(function(){a.chartObj.setChartData(s,String(n).toLowerCase()),a.chartObj.render()}):this.isSameChartData(s,i)||r(s)||this.runOutsideAngular(function(){a.chartObj.setChartData(s,n?String(n).toLowerCase():"json")})},e.prototype.isSameChartData=function(e,t){return a(e)&&a(t)?n(e,t):e===t},e.prototype.checkAndUpdateEvents=function(e,t){var a,n,s=this,o=e.events,i=t.events;this.detectChartEventsChange(o,i)&&(r(o)||(a=Object.assign({},o),n=r(i)?{}:Object.assign({},i),Object.keys(n).forEach(function(e){n[e]===a[e]?a[e]=void 0:s.runOutsideAngular(function(){s.chartObj.removeEventListener(e,n[e])})}),Object.keys(a).forEach(function(e){a[e]&&s.runOutsideAngular(function(){s.chartObj.addEventListener(e,a[e])})})))},e.prototype.detectChartEventsChange=function(e,t){return a(e)&&a(t)?!this.isSameChartEvents(e,t):!(e===t)},e.prototype.isSameChartEvents=function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var a=Object.keys(e),n=0;n<a.length;++n){var r=a[n];if(e[r]!==t[r])return!1}return!0},e.prototype.checkAndUpdateRestOptions=function(e,t,a){var n=this,s=!1;e.forEach(function(e){var o=t[e],i=a[e];n.isSameOptionValue(o,i)||r(o)||n.chartObj.options&&n.chartObj.options.hasOwnProperty(e)&&(n.chartObj.options[e]=o,s=!0)}),s&&this.runOutsideAngular(function(){n.chartObj.render()})},e.prototype.isSameOptionValue=function(e,t){return a(e)&&a(t)?n(e,t):String(e)===String(t)},e.prototype.renderChart=function(){var e=this,t=this.getCurrentOptions(),a=this.chartObj;t.renderAt=this.chartContainer.nativeElement,a&&a.dispose&&a.dispose(),this.chartObj=this.fusionChartsService.newFusionChartsInstance(t),this.runOutsideAngular(function(){e.chartObj.render()})},e.prototype.getCurrentOptions=function(){var e=this,t=this.chartConfig?this.chartConfig:{},n=p.reduce(function(t,a){return t[a]=e[a],t},{});if(Object.assign(n,t),a(n.dataSource)&&(n.dataSource=s(n.dataSource)),a(n.link)&&(n.link=s(n.link)),a(n.events)){var r=n.events,o={},i="__wrapper_for_angular_zone__",g=this;Object.keys(r).forEach(function(e){var t;r[e][i]?t=r[e][i]:(t=function(e){return function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var n=this;g.ngZone.run(function(){e.call.apply(e,[n].concat(t))})}}(r[e]),r[e][i]=t),o[e]=t}),n.events=o}return n},e.prototype.runOutsideAngular=function(e){this.ngZone.runOutsideAngular(function(){setTimeout(e)})},e}();g.decorators=[{type:t.Component,args:[{selector:"fusioncharts",template:"<div #chartContainer></div>"}]}],g.ctorParameters=function(){return[{type:i},{type:t.NgZone}]},g.propDecorators={chartContainer:[{type:t.ViewChild,args:["chartContainer"]}],chartConfig:[{type:t.Input}],type:[{type:t.Input}],id:[{type:t.Input}],width:[{type:t.Input}],height:[{type:t.Input}],dataFormat:[{type:t.Input}],dataSource:[{type:t.Input}],events:[{type:t.Input}],link:[{type:t.Input}],showDataLoadingMessage:[{type:t.Input}],showChartLoadingMessage:[{type:t.Input}],baseChartMessageFont:[{type:t.Input}],baseChartMessageFontSize:[{type:t.Input}],baseChartMessageColor:[{type:t.Input}],dataLoadStartMessage:[{type:t.Input}],dataLoadErrorMessage:[{type:t.Input}],dataInvalidMessage:[{type:t.Input}],dataEmptyMessage:[{type:t.Input}],typeNotSupportedMessage:[{type:t.Input}],loadMessage:[{type:t.Input}],renderErrorMessage:[{type:t.Input}],containerBackgroundColor:[{type:t.Input}],containerBackgroundOpacity:[{type:t.Input}],containerClassName:[{type:t.Input}],baseChartMessageImageHAlign:[{type:t.Input}],baseChartMessageImageVAlign:[{type:t.Input}],baseChartMessageImageAlpha:[{type:t.Input}],baseChartMessageImageScale:[{type:t.Input}],typeNotSupportedMessageImageHAlign:[{type:t.Input}],typeNotSupportedMessageImageVAlign:[{type:t.Input}],typeNotSupportedMessageImageAlpha:[{type:t.Input}],typeNotSupportedMessageImageScale:[{type:t.Input}],dataLoadErrorMessageImageHAlign:[{type:t.Input}],dataLoadErrorMessageImageVAlign:[{type:t.Input}],dataLoadErrorMessageImageAlpha:[{type:t.Input}],dataLoadErrorMessageImageScale:[{type:t.Input}],dataLoadStartMessageImageHAlign:[{type:t.Input}],dataLoadStartMessageImageVAlign:[{type:t.Input}],dataLoadStartMessageImageAlpha:[{type:t.Input}],dataLoadStartMessageImageScale:[{type:t.Input}],dataInvalidMessageImageHAlign:[{type:t.Input}],dataInvalidMessageImageVAlign:[{type:t.Input}],dataInvalidMessageImageAlpha:[{type:t.Input}],dataInvalidMessageImageScale:[{type:t.Input}],dataEmptyMessageImageHAlign:[{type:t.Input}],dataEmptyMessageImageVAlign:[{type:t.Input}],dataEmptyMessageImageAlpha:[{type:t.Input}],dataEmptyMessageImageScale:[{type:t.Input}],renderErrorMessageImageHAlign:[{type:t.Input}],renderErrorMessageImageVAlign:[{type:t.Input}],renderErrorMessageImageAlpha:[{type:t.Input}],renderErrorMessageImageScale:[{type:t.Input}],loadMessageImageHAlign:[{type:t.Input}],loadMessageImageVAlign:[{type:t.Input}],loadMessageImageAlpha:[{type:t.Input}],loadMessageImageScale:[{type:t.Input}]};var u=function(){function e(){}return e.forRoot=function(t){for(var a=[],n=1;n<arguments.length;n++)a[n-1]=arguments[n];return{ngModule:e,providers:[i,{provide:o,useValue:{core:t,modules:a}}]}},e.fcRoot=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];i.resolveFusionChartsCore(e,t)},e}();u.decorators=[{type:t.NgModule,args:[{declarations:[g],exports:[g],providers:[i,o]}]}],u.ctorParameters=function(){return[]},e.FusionChartsModule=u,e.FusionChartsComponent=g,e.FusionChartsService=i,e.FusionChartsCoreService=o,Object.defineProperty(e,"__esModule",{value:!0})});